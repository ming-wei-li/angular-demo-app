"use strict";(self.webpackChunkangular_demo_app=self.webpackChunkangular_demo_app||[]).push([[310],{2310:(B,p,a)=>{a.r(p),a.d(p,{CustomerModule:()=>I});var d=a(8583),c=a(1383),t=a(639),f=a(1841);let m=(()=>{class n{constructor(e){this.http=e,this.url="/api/customers"}getAll(){return this.http.get(this.url)}getById(e){return this.http.get(`${this.url}/${e}`)}create(e){return this.http.post(this.url,e)}update(e,o){return this.http.put(`${this.url}/${e}`,o)}delete(e){return this.http.delete(`${this.url}/${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(f.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function C(n,r){1&n&&(t.TgZ(0,"div"),t._uU(1,"\u8f09\u5165\u4e2d..."),t.qZA())}function b(n,r){if(1&n&&(t.TgZ(0,"div",5),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.error)}}function h(n,r){if(1&n&&(t.TgZ(0,"div",6),t.TgZ(1,"p"),t.TgZ(2,"strong"),t._uU(3,"\u540d\u7a31\uff1a"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"p"),t.TgZ(6,"strong"),t._uU(7,"Email\uff1a"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"p"),t.TgZ(10,"strong"),t._uU(11,"\u96fb\u8a71\uff1a"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"p"),t.TgZ(14,"strong"),t._uU(15,"\u5730\u5740\uff1a"),t.qZA(),t._uU(16),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(4),t.Oqu(e.customer.name),t.xp6(4),t.Oqu(e.customer.email),t.xp6(4),t.Oqu(e.customer.phone),t.xp6(4),t.Oqu(e.customer.address)}}let x=(()=>{class n{constructor(e,o,i){this.router=e,this.route=o,this.customerService=i,this.customer=null,this.isLoading=!0,this.error=null}back(){this.router.navigate(["/customer"])}ngOnInit(){const e=this.route.snapshot.paramMap.get("id");e&&this.customerService.getById(+e).subscribe({next:o=>{this.customer=o,this.isLoading=!1},error:o=>{this.error="\u7121\u6cd5\u8f09\u5165\u5ba2\u6236\u8cc7\u6599",this.isLoading=!1}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.F0),t.Y36(c.gz),t.Y36(m))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-detail"]],decls:8,vars:3,consts:[[1,"customer-detail"],[4,"ngIf"],["class","error",4,"ngIf"],["class","detail-card",4,"ngIf"],[3,"click"],[1,"error"],[1,"detail-card"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h2"),t._uU(2,"\u5ba2\u6236\u8a73\u60c5"),t.qZA(),t.YNc(3,C,2,0,"div",1),t.YNc(4,b,2,1,"div",2),t.YNc(5,h,17,4,"div",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return o.back()}),t._uU(7,"\u8fd4\u56de\u5217\u8868"),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.error),t.xp6(1),t.Q6J("ngIf",o.customer&&!o.isLoading))},directives:[d.O5],styles:[".customer-detail[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px}.customer-detail[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]{background-color:#fafafa;border:1px solid #e8e8e8;padding:16px;border-radius:6px;margin-bottom:20px}.customer-detail[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}.customer-detail[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#1890ff;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer}.customer-detail[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#40a9ff}.customer-detail[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#f5222d;font-weight:bold}"]}),n})();function Z(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",5),t._uU(2),t.qZA(),t.TgZ(3,"td",6),t._uU(4),t.qZA(),t.TgZ(5,"td",7),t.TgZ(6,"button",8),t.NdJ("click",function(){const u=t.CHM(e).$implicit;return t.oxw().viewUser(u.id)}),t._uU(7,"\u67e5\u770b"),t.qZA(),t.TgZ(8,"button",9),t.NdJ("click",function(){const u=t.CHM(e).$implicit;return t.oxw().editUser(u.id)}),t._uU(9,"\u7de8\u8f2f"),t.qZA(),t.TgZ(10,"button",10),t.NdJ("click",function(){const u=t.CHM(e).$implicit;return t.oxw().deleteUser(u.id)}),t._uU(11,"\u522a\u9664"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=r.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.email)}}let M=(()=>{class n{constructor(e,o){this.router=e,this.customerService=o,this.customers=[]}addUser(){this.router.navigate(["/customer/create"])}viewUser(e){this.router.navigate(["/customer",e])}editUser(e){this.router.navigate(["/customer/edit",e])}deleteUser(e){confirm("\u78ba\u8a8d\u522a\u9664?")&&this.customerService.delete(e).subscribe(()=>{this.customers=this.customers.filter(o=>o.id!==e)})}ngOnInit(){this.customerService.getAll().subscribe(e=>this.customers=e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.F0),t.Y36(m))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list"]],decls:15,vars:1,consts:[[1,"customer-list","container"],[1,"toolbar"],[1,"primary-btn",3,"click"],[1,"customer-table"],[4,"ngFor","ngForOf"],["data-label","\u540d\u7a31"],["data-label","Email"],["data-label","\u64cd\u4f5c"],[1,"action-btn",3,"click"],[1,"action-btn","edit",3,"click"],[1,"action-btn","danger",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return o.addUser()}),t._uU(3,"\u2795 \u65b0\u589e\u5ba2\u6236"),t.qZA(),t.qZA(),t.TgZ(4,"table",3),t.TgZ(5,"thead"),t.TgZ(6,"tr"),t.TgZ(7,"th"),t._uU(8,"\u540d\u7a31"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Email"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"\u64cd\u4f5c"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"tbody"),t.YNc(14,Z,12,2,"tr",4),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(14),t.Q6J("ngForOf",o.customers))},directives:[d.sg],styles:[".container[_ngcontent-%COMP%]{padding:20px}.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:16px}.primary-btn[_ngcontent-%COMP%]{padding:6px 14px;font-size:14px;background-color:#1890ff;border:none;border-radius:4px;color:#fff;cursor:pointer}.primary-btn[_ngcontent-%COMP%]:hover{background-color:#40a9ff}.customer-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.customer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .customer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #e8e8e8;padding:12px;text-align:left}.customer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#fafafa;font-weight:600}.customer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:6px}.action-btn[_ngcontent-%COMP%]{padding:4px 10px;font-size:13px;border-radius:4px;border:none;cursor:pointer;background-color:#d9d9d9;color:#333}.action-btn[_ngcontent-%COMP%]:hover{opacity:.9}.action-btn.edit[_ngcontent-%COMP%]{background-color:#faad14;color:#fff}.action-btn.danger[_ngcontent-%COMP%]{background-color:#f5222d;color:#fff}@media (max-width: 768px){.customer-table[_ngcontent-%COMP%], .customer-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .customer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .customer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .customer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .customer-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block}.customer-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:12px;border-bottom:1px solid #ddd}.customer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:50%;position:relative}.customer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{position:absolute;left:10px;top:12px;white-space:nowrap;font-weight:bold;color:#888;content:attr(data-label)}}"]}),n})();var s=a(665);function O(n,r){if(1&n&&(t.TgZ(0,"div",16),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.ekj("error",e.isError),t.xp6(1),t.Oqu(e.message)}}function A(n,r){1&n&&(t.TgZ(0,"div",17),t._uU(1," \u540d\u7a31\u70ba\u5fc5\u586b "),t.qZA())}function v(n,r){1&n&&(t.TgZ(0,"span"),t._uU(1,"Email\u70ba\u5fc5\u586b"),t.qZA())}function P(n,r){1&n&&(t.TgZ(0,"span"),t._uU(1,"Email\u683c\u5f0f\u932f\u8aa4"),t.qZA())}function T(n,r){if(1&n&&(t.TgZ(0,"div",17),t.YNc(1,v,2,0,"span",18),t.YNc(2,P,2,0,"span",18),t.qZA()),2&n){const e=t.oxw();let o,i;t.xp6(1),t.Q6J("ngIf",null==(o=e.form.get("email"))||null==o.errors?null:o.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=e.form.get("email"))||null==i.errors?null:i.errors.email)}}function q(n,r){1&n&&(t.TgZ(0,"span"),t._uU(1,"\u96fb\u8a71\u70ba\u5fc5\u586b"),t.qZA())}function F(n,r){1&n&&(t.TgZ(0,"span"),t._uU(1,"\u96fb\u8a71\u683c\u5f0f\u932f\u8aa4"),t.qZA())}function U(n,r){if(1&n&&(t.TgZ(0,"div",17),t.YNc(1,q,2,0,"span",18),t.YNc(2,F,2,0,"span",18),t.qZA()),2&n){const e=t.oxw();let o,i;t.xp6(1),t.Q6J("ngIf",null==(o=e.form.get("phone"))||null==o.errors?null:o.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=e.form.get("phone"))||null==i.errors?null:i.errors.pattern)}}function k(n,r){1&n&&(t.TgZ(0,"div",17),t._uU(1," \u5730\u5740\u70ba\u5fc5\u586b "),t.qZA())}let _=(()=>{class n{constructor(e,o,i,u){this.router=e,this.fb=o,this.route=i,this.service=u,this.isEdit=!1,this.submitting=!1,this.id=null,this.message=null,this.isError=!1}cancel(){this.router.navigate(["/customer",this.id])}submit(){if(this.form.invalid)return void this.showMessage("\u8acb\u78ba\u8a8d\u8868\u55ae\u8f38\u5165\u5167\u5bb9\u662f\u5426\u6b63\u78ba",!0);this.submitting=!0;const e=this.form.value;(this.isEdit?this.service.update(this.id,Object.assign({id:this.id},e)):this.service.create(e)).subscribe({next:()=>{this.showMessage(this.isEdit?"\u66f4\u65b0\u6210\u529f":"\u5efa\u7acb\u6210\u529f")},error:()=>{this.showMessage("\u5132\u5b58\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66",!0),this.submitting=!1}})}setForm(){this.form=this.fb.group({name:["",s.kI.required],email:["",[s.kI.required,s.kI.email]],phone:["",[s.kI.required,s.kI.pattern(/^(\+?\d{1,4}[-.\s]?)?(\d{6,14})$/)]],address:["",s.kI.required]})}showMessage(e,o=!1){this.message=e,this.isError=o,setTimeout(()=>{this.message=null,o||this.router.navigate(["/customer"])},1e3)}ngOnInit(){const e=this.route.snapshot.paramMap.get("id");e&&(this.isEdit=!0,this.id=+e,this.service.getById(this.id).subscribe({next:o=>this.form.patchValue(o),error:()=>this.showMessage("\u8f09\u5165\u8cc7\u6599\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66",!0)})),this.setForm()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.F0),t.Y36(s.qu),t.Y36(c.gz),t.Y36(m))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create"]],decls:30,vars:10,consts:[["class","message-box",3,"error",4,"ngIf"],[1,"customer-form"],["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group"],["for","name"],["id","name","formControlName","name"],["class","error",4,"ngIf"],["for","email"],["id","email","formControlName","email","type","email"],["for","phone"],["id","phone","formControlName","phone"],["for","address"],["id","address","formControlName","address"],[1,"actions"],["type","submit",3,"disabled"],["type","button",3,"disabled","click"],[1,"message-box"],[1,"error"],[4,"ngIf"]],template:function(e,o){if(1&e&&(t.YNc(0,O,2,3,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h2"),t._uU(3),t.qZA(),t.TgZ(4,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(5,"div",3),t.TgZ(6,"label",4),t._uU(7,"\u540d\u7a31"),t.qZA(),t._UZ(8,"input",5),t.YNc(9,A,2,0,"div",6),t.qZA(),t.TgZ(10,"div",3),t.TgZ(11,"label",7),t._uU(12,"Email"),t.qZA(),t._UZ(13,"input",8),t.YNc(14,T,3,2,"div",6),t.qZA(),t.TgZ(15,"div",3),t.TgZ(16,"label",9),t._uU(17,"\u96fb\u8a71"),t.qZA(),t._UZ(18,"input",10),t.YNc(19,U,3,2,"div",6),t.qZA(),t.TgZ(20,"div",3),t.TgZ(21,"label",11),t._uU(22,"\u5730\u5740"),t.qZA(),t._UZ(23,"input",12),t.YNc(24,k,2,0,"div",6),t.qZA(),t.TgZ(25,"div",13),t.TgZ(26,"button",14),t._uU(27),t.qZA(),t.TgZ(28,"button",15),t.NdJ("click",function(){return o.cancel()}),t._uU(29," \u53d6\u6d88 "),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){let i,u,l,g;t.Q6J("ngIf",o.message),t.xp6(3),t.Oqu(o.isEdit?"\u7de8\u8f2f\u5ba2\u6236":"\u65b0\u589e\u5ba2\u6236"),t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(5),t.Q6J("ngIf",(null==(i=o.form.get("name"))?null:i.touched)&&(null==(i=o.form.get("name"))?null:i.invalid)),t.xp6(5),t.Q6J("ngIf",(null==(u=o.form.get("email"))?null:u.touched)&&(null==(u=o.form.get("email"))?null:u.invalid)),t.xp6(5),t.Q6J("ngIf",(null==(l=o.form.get("phone"))?null:l.touched)&&(null==(l=o.form.get("phone"))?null:l.invalid)),t.xp6(5),t.Q6J("ngIf",(null==(g=o.form.get("address"))?null:g.touched)&&(null==(g=o.form.get("address"))?null:g.invalid)),t.xp6(2),t.Q6J("disabled",o.submitting),t.xp6(1),t.hij(" ",o.isEdit?"\u66f4\u65b0":"\u5efa\u7acb"," "),t.xp6(1),t.Q6J("disabled",o.submitting)}},directives:[d.O5,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u],styles:[".customer-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding:24px;background:#fff;border-radius:6px;box-shadow:0 0 8px #0000001a}.customer-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:24px;text-align:center}.customer-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:16px;display:flex;flex-direction:column}.customer-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:6px;font-weight:600}.customer-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ccc;border-radius:4px;font-size:14px}.customer-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1890ff;box-shadow:0 0 5px #1890ffaa}.customer-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#f5222d;font-size:12px;margin-top:4px}.customer-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:center;grid-gap:12px;gap:12px}.customer-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#1890ff;border:none;padding:10px 20px;color:#fff;font-weight:600;border-radius:4px;cursor:pointer;transition:background-color .3s ease}.customer-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#a0a0a0;cursor:not-allowed}.customer-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#40a9ff}.customer-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{background-color:#f5222d}.customer-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]:hover:not(:disabled){background-color:#ff4d4f}.message-box[_ngcontent-%COMP%]{position:fixed;top:20px;left:50%;transform:translate(-50%);background-color:#52c41a;color:#fff;padding:10px 20px;border-radius:6px;box-shadow:0 2px 8px #00000026;z-index:1000;font-size:14px;transition:opacity .3s}.message-box.error[_ngcontent-%COMP%]{background-color:#f5222d}"]}),n})();const y=[{path:"",component:M},{path:"create",component:_},{path:"edit/:id",component:_},{path:":id",component:x}];let w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.Bz.forChild(y)],c.Bz]}),n})(),I=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[m],imports:[[d.ez,s.u5,s.UX,c.Bz,w]]}),n})()}}]);