"use strict";(self.webpackChunkangular_demo_app=self.webpackChunkangular_demo_app||[]).push([[310],{2310:(w,p,a)=>{a.r(p),a.d(p,{CustomerModule:()=>Y});var d=a(8583),c=a(630),t=a(639),_=a(1841);let g=(()=>{class n{constructor(e){this.http=e,this.url="/api/customers"}getAll(){return this.http.get(this.url)}getById(e){return this.http.get(`${this.url}/${e}`)}create(e){return this.http.post(this.url,e)}update(e,o){return this.http.put(`${this.url}/${e}`,o)}delete(e){return this.http.delete(`${this.url}/${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(_.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function C(n,r){1&n&&(t.TgZ(0,"div"),t._uU(1,"\u8f09\u5165\u4e2d..."),t.qZA())}function b(n,r){if(1&n&&(t.TgZ(0,"div",5),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.error)}}function h(n,r){if(1&n&&(t.TgZ(0,"div",6),t.TgZ(1,"p"),t.TgZ(2,"strong"),t._uU(3,"\u540d\u7a31\uff1a"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"p"),t.TgZ(6,"strong"),t._uU(7,"Email\uff1a"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"p"),t.TgZ(10,"strong"),t._uU(11,"\u96fb\u8a71\uff1a"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"p"),t.TgZ(14,"strong"),t._uU(15,"\u5730\u5740\uff1a"),t.qZA(),t._uU(16),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(4),t.Oqu(e.customer.name),t.xp6(4),t.Oqu(e.customer.email),t.xp6(4),t.Oqu(e.customer.phone),t.xp6(4),t.Oqu(e.customer.address)}}let Z=(()=>{class n{constructor(e,o,i){this.route=e,this.customerService=o,this.router=i,this.customer=null,this.isLoading=!0,this.error=null}ngOnInit(){const e=this.route.snapshot.paramMap.get("id");e&&this.customerService.getById(+e).subscribe({next:o=>{this.customer=o,this.isLoading=!1},error:o=>{this.error="\u7121\u6cd5\u8f09\u5165\u5ba2\u6236\u8cc7\u6599",this.isLoading=!1}})}back(){this.router.navigate(["/customer"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.gz),t.Y36(g),t.Y36(c.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-detail"]],decls:8,vars:3,consts:[[1,"customer-detail"],[4,"ngIf"],["class","error",4,"ngIf"],["class","detail-card",4,"ngIf"],[3,"click"],[1,"error"],[1,"detail-card"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h2"),t._uU(2,"\u5ba2\u6236\u8a73\u60c5"),t.qZA(),t.YNc(3,C,2,0,"div",1),t.YNc(4,b,2,1,"div",2),t.YNc(5,h,17,4,"div",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return o.back()}),t._uU(7,"\u8fd4\u56de\u5217\u8868"),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.error),t.xp6(1),t.Q6J("ngIf",o.customer&&!o.isLoading))},directives:[d.O5],styles:[".customer-detail[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px}.customer-detail[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]{background-color:#fafafa;border:1px solid #e8e8e8;padding:16px;border-radius:6px;margin-bottom:20px}.customer-detail[_ngcontent-%COMP%]   .detail-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}.customer-detail[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#1890ff;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer}.customer-detail[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#40a9ff}.customer-detail[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#f5222d;font-weight:bold}"]}),n})();const x=function(n){return["/customer",n]},M=function(n){return["/customer/edit",n]};function O(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",5),t._uU(2),t.qZA(),t.TgZ(3,"td",6),t._uU(4),t.qZA(),t.TgZ(5,"td",7),t.TgZ(6,"button",8),t._uU(7,"\u67e5\u770b"),t.qZA(),t.TgZ(8,"button",9),t._uU(9,"\u7de8\u8f2f"),t.qZA(),t.TgZ(10,"button",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().deleteUser(s.id)}),t._uU(11,"\u522a\u9664"),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=r.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Q6J("routerLink",t.VKq(4,x,e.id)),t.xp6(2),t.Q6J("routerLink",t.VKq(6,M,e.id))}}let A=(()=>{class n{constructor(e,o){this.customerService=e,this.router=o,this.customers=[]}ngOnInit(){this.customerService.getAll().subscribe(e=>this.customers=e)}deleteUser(e){confirm("\u78ba\u8a8d\u522a\u9664?")&&this.customerService.delete(e).subscribe(()=>{this.customers=this.customers.filter(o=>o.id!==e)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g),t.Y36(c.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list"]],decls:15,vars:1,consts:[[1,"customer-list","container"],[1,"toolbar"],["routerLink","/customers/create",1,"primary-btn"],[1,"customer-table"],[4,"ngFor","ngForOf"],["data-label","\u540d\u7a31"],["data-label","Email"],["data-label","\u64cd\u4f5c"],[1,"action-btn",3,"routerLink"],[1,"action-btn","edit",3,"routerLink"],[1,"action-btn","danger",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t._uU(3,"\u2795 \u65b0\u589e\u5ba2\u6236"),t.qZA(),t.qZA(),t.TgZ(4,"table",3),t.TgZ(5,"thead"),t.TgZ(6,"tr"),t.TgZ(7,"th"),t._uU(8,"\u540d\u7a31"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Email"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"\u64cd\u4f5c"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"tbody"),t.YNc(14,O,12,8,"tr",4),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(14),t.Q6J("ngForOf",o.customers))},directives:[c.rH,d.sg],styles:[".container[_ngcontent-%COMP%]{padding:20px}.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:16px}.primary-btn[_ngcontent-%COMP%]{padding:6px 14px;font-size:14px;background-color:#1890ff;border:none;border-radius:4px;color:#fff;cursor:pointer}.primary-btn[_ngcontent-%COMP%]:hover{background-color:#40a9ff}.customer-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.customer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .customer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #e8e8e8;padding:12px;text-align:left}.customer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#fafafa;font-weight:600}.customer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:6px}.action-btn[_ngcontent-%COMP%]{padding:4px 10px;font-size:13px;border-radius:4px;border:none;cursor:pointer;background-color:#d9d9d9;color:#333}.action-btn[_ngcontent-%COMP%]:hover{opacity:.9}.action-btn.edit[_ngcontent-%COMP%]{background-color:#faad14;color:#fff}.action-btn.danger[_ngcontent-%COMP%]{background-color:#f5222d;color:#fff}@media (max-width: 768px){.customer-table[_ngcontent-%COMP%], .customer-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .customer-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .customer-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .customer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .customer-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block}.customer-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:12px;border-bottom:1px solid #ddd}.customer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:50%;position:relative}.customer-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{position:absolute;left:10px;top:12px;white-space:nowrap;font-weight:bold;color:#888;content:attr(data-label)}}"]}),n})();var u=a(665);function P(n,r){1&n&&(t.TgZ(0,"div",16),t._uU(1," \u540d\u7a31\u70ba\u5fc5\u586b "),t.qZA())}function v(n,r){1&n&&(t.TgZ(0,"span"),t._uU(1,"Email\u70ba\u5fc5\u586b"),t.qZA())}function T(n,r){1&n&&(t.TgZ(0,"span"),t._uU(1,"Email\u683c\u5f0f\u932f\u8aa4"),t.qZA())}function q(n,r){if(1&n&&(t.TgZ(0,"div",16),t.YNc(1,v,2,0,"span",17),t.YNc(2,T,2,0,"span",17),t.qZA()),2&n){const e=t.oxw();let o,i;t.xp6(1),t.Q6J("ngIf",null==(o=e.form.get("email"))||null==o.errors?null:o.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=e.form.get("email"))||null==i.errors?null:i.errors.email)}}function F(n,r){1&n&&(t.TgZ(0,"span"),t._uU(1,"\u96fb\u8a71\u70ba\u5fc5\u586b"),t.qZA())}function U(n,r){1&n&&(t.TgZ(0,"span"),t._uU(1,"\u96fb\u8a71\u683c\u5f0f\u932f\u8aa4"),t.qZA())}function k(n,r){if(1&n&&(t.TgZ(0,"div",16),t.YNc(1,F,2,0,"span",17),t.YNc(2,U,2,0,"span",17),t.qZA()),2&n){const e=t.oxw();let o,i;t.xp6(1),t.Q6J("ngIf",null==(o=e.form.get("phone"))||null==o.errors?null:o.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=e.form.get("phone"))||null==i.errors?null:i.errors.pattern)}}function y(n,r){1&n&&(t.TgZ(0,"div",16),t._uU(1," \u5730\u5740\u70ba\u5fc5\u586b "),t.qZA())}function I(n,r){if(1&n&&(t.TgZ(0,"div",18),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.errorMsg)}}let f=(()=>{class n{constructor(e,o,i,s){this.fb=e,this.route=o,this.service=i,this.router=s,this.isEdit=!1,this.id=null,this.submitting=!1,this.errorMsg=null,this.form=this.fb.group({name:["",u.kI.required],email:["",[u.kI.required,u.kI.email]],phone:["",[u.kI.required,u.kI.pattern(/^(\+?\d{1,4}[-.\s]?)?(\d{6,14})$/)]],address:["",u.kI.required]})}cancel(){this.router.navigate(["/customer",this.id])}ngOnInit(){const e=this.route.snapshot.paramMap.get("id");e&&(this.isEdit=!0,this.id=+e,this.service.getById(this.id).subscribe({next:o=>this.form.patchValue(o),error:()=>this.errorMsg="\u8f09\u5165\u8cc7\u6599\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66"}))}onSubmit(){if(this.form.invalid)return void(this.errorMsg="\u8acb\u78ba\u8a8d\u8868\u55ae\u8f38\u5165\u5167\u5bb9\u662f\u5426\u6b63\u78ba");this.submitting=!0,this.errorMsg=null;const e=this.form.value;(this.isEdit?this.service.update(this.id,e):this.service.create(e)).subscribe({next:()=>this.router.navigate(["/customer"]),error:()=>{this.errorMsg="\u5132\u5b58\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66",this.submitting=!1}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.qu),t.Y36(c.gz),t.Y36(g),t.Y36(c.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create"]],decls:30,vars:10,consts:[[1,"customer-form"],["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group"],["for","name"],["id","name","formControlName","name"],["class","error",4,"ngIf"],["for","email"],["id","email","formControlName","email","type","email"],["for","phone"],["id","phone","formControlName","phone"],["for","address"],["id","address","formControlName","address"],[1,"actions"],["type","submit",3,"disabled"],["type","button",3,"disabled","click"],["class","submit-error",4,"ngIf"],[1,"error"],[4,"ngIf"],[1,"submit-error"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h2"),t._uU(2),t.qZA(),t.TgZ(3,"form",1),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(4,"div",2),t.TgZ(5,"label",3),t._uU(6,"\u540d\u7a31"),t.qZA(),t._UZ(7,"input",4),t.YNc(8,P,2,0,"div",5),t.qZA(),t.TgZ(9,"div",2),t.TgZ(10,"label",6),t._uU(11,"Email"),t.qZA(),t._UZ(12,"input",7),t.YNc(13,q,3,2,"div",5),t.qZA(),t.TgZ(14,"div",2),t.TgZ(15,"label",8),t._uU(16,"\u96fb\u8a71"),t.qZA(),t._UZ(17,"input",9),t.YNc(18,k,3,2,"div",5),t.qZA(),t.TgZ(19,"div",2),t.TgZ(20,"label",10),t._uU(21,"\u5730\u5740"),t.qZA(),t._UZ(22,"input",11),t.YNc(23,y,2,0,"div",5),t.qZA(),t.TgZ(24,"div",12),t.TgZ(25,"button",13),t._uU(26),t.qZA(),t.TgZ(27,"button",14),t.NdJ("click",function(){return o.cancel()}),t._uU(28," \u53d6\u6d88 "),t.qZA(),t.qZA(),t.YNc(29,I,2,1,"div",15),t.qZA(),t.qZA()),2&e){let i,s,l,m;t.xp6(2),t.Oqu(o.isEdit?"\u7de8\u8f2f\u5ba2\u6236":"\u65b0\u589e\u5ba2\u6236"),t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(5),t.Q6J("ngIf",(null==(i=o.form.get("name"))?null:i.touched)&&(null==(i=o.form.get("name"))?null:i.invalid)),t.xp6(5),t.Q6J("ngIf",(null==(s=o.form.get("email"))?null:s.touched)&&(null==(s=o.form.get("email"))?null:s.invalid)),t.xp6(5),t.Q6J("ngIf",(null==(l=o.form.get("phone"))?null:l.touched)&&(null==(l=o.form.get("phone"))?null:l.invalid)),t.xp6(5),t.Q6J("ngIf",(null==(m=o.form.get("address"))?null:m.touched)&&(null==(m=o.form.get("address"))?null:m.invalid)),t.xp6(2),t.Q6J("disabled",o.submitting),t.xp6(1),t.hij(" ",o.isEdit?"\u66f4\u65b0":"\u5efa\u7acb"," "),t.xp6(1),t.Q6J("disabled",o.submitting),t.xp6(2),t.Q6J("ngIf",o.errorMsg)}},directives:[u._Y,u.JL,u.sg,u.Fj,u.JJ,u.u,d.O5],styles:[".customer-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding:24px;background:#fff;border-radius:6px;box-shadow:0 0 8px #0000001a}.customer-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:24px;text-align:center}.customer-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:16px;display:flex;flex-direction:column}.customer-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:6px;font-weight:600}.customer-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ccc;border-radius:4px;font-size:14px}.customer-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1890ff;box-shadow:0 0 5px #1890ffaa}.customer-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#f5222d;font-size:12px;margin-top:4px}.customer-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;justify-content:center;grid-gap:12px;gap:12px}.customer-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#1890ff;border:none;padding:10px 20px;color:#fff;font-weight:600;border-radius:4px;cursor:pointer;transition:background-color .3s ease}.customer-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#a0a0a0;cursor:not-allowed}.customer-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#40a9ff}.customer-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{background-color:#f5222d}.customer-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]:hover:not(:disabled){background-color:#ff4d4f}.customer-form[_ngcontent-%COMP%]   .submit-error[_ngcontent-%COMP%]{margin-top:16px;color:#f5222d;font-weight:600;text-align:center}"]}),n})();const B=[{path:"",component:A},{path:"create",component:f},{path:"edit/:id",component:f},{path:":id",component:Z}];let J=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.Bz.forChild(B)],c.Bz]}),n})(),Y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[g],imports:[[d.ez,u.u5,u.UX,c.Bz,J]]}),n})()}}]);